<!doctype html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport"
          content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Document</title>
</head>
<body>
<script>
  function defineReactive(data, key, val) {
    Object.defineProperty(data, key, {
      enumerable: true,
      configurable: true,

      get: function defineGet() {
        console.log(`get key: ${key} val: ${val}`)
        return val
      },

      set: function defineSet(newVal) {
        console.log(`set key: ${key} val: ${newVal}`)
        val = newVal
        // this.skills = newVal
        // test[key] = newVal
      }
    })
  }

  function observe(data) {
    Object.keys(data).forEach(function(key) {
      defineReactive(data, key, data[key])
    })
  }

  // const test = {
  //   name: 'ym',
  //   skills: ['large', 'big'],
  //   loves: 'a'
  // }
  let test = [1, 2, 3]
  // let test = { a: 1 }

  // observe(test)

  // test = { b: 1 }
  // test.push(4)
  // test[0] = 1
  // test.shift()
  // test.unshift(0)
  // test.skills = [1, 2]
  // console.log(test)

  // const arrayMethods = ['push', 'pop', 'shift', 'unshift', 'splice', 'slice']
  // const arrayOrigin = []
  //
  // arrayMethods.forEach(method => {
  //   let original = Array.prototype[method]
  //   arrayOrigin[method] = function() {
  //     console.log('change')
  //     return original.apply(this, arguments)
  //   }
  // })

  // console.log(arrayOrigin)
  // test.__proto__ = arrayOrigin
  // test.push(4)

  let proxy = new Proxy(test, {
    get(...args) {
      console.log(args)
      return 1
    },
    set() {
      console.log('1')
    }
  })

  // proxy.push(1)
  console.log(proxy[1])

// var aaa = [1]
// aaa.length = 5
// aaa[5] = 6
//   aaa.push(7)
//   console.log(aaa)
//   for (var key in aaa) {
//     console.log(key)
// }
</script>
</body>
</html>